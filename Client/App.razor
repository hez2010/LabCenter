@inject IUserService UserService

<MediaQueryList>
    <BFUTheme>
        <BFULayerHost>
            <CascadingValue Name="UserInfo" Value="@userInfo">
                <CascadingValue Name="SetUserInfo" Value="@setUserInfo">
                    <Router AppAssembly="typeof(Program).Assembly" PreferExactMatches="true">
                        <Found Context="routeData">
                            <RouteView RouteData="@routeData" DefaultLayout="typeof(MainLayout)" />
                        </Found>
                        <NotFound>
                            <LayoutView Layout="@typeof(MainLayout)">
                                <BFUText Variant="TextType.XxLarge">发生错误</BFUText>
                                <p>该页面不存在</p>
                            </LayoutView>
                        </NotFound>
                    </Router>
                </CascadingValue>
            </CascadingValue>
        </BFULayerHost>
    </BFUTheme>
</MediaQueryList>

@code {
    private UserInfo? userInfo;
    private Action<UserInfo?>? setUserInfo;

    protected override async Task OnInitializedAsync()
    {
        await base.OnInitializedAsync();
        setUserInfo = info => userInfo = info;
        userInfo = await UserService.GetProfileAsync();
    }
}
