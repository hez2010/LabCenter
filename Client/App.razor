@using LabCheckin.Shared
@inject IUserService UserService

<BFUTheme>
    <BFULayerHost>
        <CascadingValue Name="UserInfo" Value="@userInfo">
            <Router AppAssembly="typeof(Program).Assembly" PreferExactMatches="true">
                <Found Context="routeData">
                    <RouteView RouteData="@routeData" DefaultLayout="typeof(MainLayout)" />
                </Found>
                <NotFound>
                    <LayoutView Layout="@typeof(MainLayout)">
                        <p>该页面不存在</p>
                    </LayoutView>
                </NotFound>
            </Router>
        </CascadingValue>
    </BFULayerHost>
</BFUTheme>

@code {
    private UserInfo? userInfo;

    protected override async Task OnInitializedAsync()
    {
        await base.OnInitializedAsync();
        userInfo = await UserService.GetProfileAsync();
    }
}
